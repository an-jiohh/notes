
# JWT 토큰 발급 시 필요한 정보

## **Header 영역**

  

Header는 토큰의 메타데이터를 담는 영역

서명 알고리즘과 토큰 타입 등을 정의하며, 클라이언트와 서버가 토큰을 해석하고 검증하는 데 필요한 기준 역할 수행
  
### **주요 필드**

|**필드명**|**설명**|**예시**|
|---|---|---|
|alg|서명에 사용된 알고리즘 지정|“HS256”, “RS256”|
|typ|토큰의 타입 정의|“JWT”|
|kid|서명 키를 식별하기 위한 키 ID (선택 항목)|“key-v2024”|

### **특징**

- Base64Url 인코딩된 JSON 형식으로 구성
- 서버는 alg와 kid 값을 이용해 서명 검증 로직 분기
- 비대칭키 사용 시 키 교체 전략과 함께 활용됨

---

## **Payload 영역**

  

Payload는 토큰의 본문 데이터 영역

사용자 정보, 토큰의 유효 시간, 발급자 정보 등을 포함하며, 권한 또는 도메인 전용 데이터도 함께 포함 가능.

Base64Url 인코딩되지만 암호화되지 않기 때문에 민감 정보는 포함하지 않아야 함.

  

### **표준 클레임 (Registered Claims)**

|**필드명**|**의미**|**예시**|
|---|---|---|
|sub|토큰의 주체. 일반적으로 사용자 고유 식별자 사용|“user-1234”|
|iat|발급 시간 (Issued At). UNIX timestamp 사용|1718000000|
|exp|만료 시간 (Expiration). 이 시간 이후 토큰은 무효 처리됨|1718003600|
|iss|발급자 (Issuer). 토큰을 생성한 시스템 식별자|“auth.myapp.com”|
|aud|수신 대상자 (Audience). 토큰의 활용 대상 시스템 지정|“frontend-client”|

### **커스텀 클레임 (Private Claims)**

|**필드명**|**의미**|**예시**|
|---|---|---|
|role|사용자 권한 또는 역할 정의|“admin”, “user”|
|scope|접근 권한 범위 정의|“read write”|
|organizationId|사용자 소속 조직 ID|“org-001”|
|nickname|사용자 별명 또는 표시 이름|“개발자lee”|

### **특징**

- 핵심 인증/인가 정보를 담는 영역
    
- 커스텀 필드는 네임스페이스 형태("myapp:userId")로 관리 가능
    
- 토큰 자체로 사용자 인증과 권한 판별 가능하지만, 탈취에 대비해 만료 시간을 짧게 설정하는 것이 보안상 안전
    

---

## **Signature 영역**

  

Signature는 토큰이 위변조되지 않았음을 보장하기 위한 서명 데이터.

서버는 Header와 Payload의 내용을 조합하여 서명하고, 클라이언트로부터 받은 토큰의 서명을 다시 검증함.

서명 방식은 대칭키(HMAC) 또는 비대칭키(RSA, ECDSA) 방식 중 하나 선택.

  

### **서명 생성 방식**

```
HMACSHA256(
  Base64UrlEncode(header) + "." + Base64UrlEncode(payload),
  secret
)
```

또는

```
RSASHA256(
  Base64UrlEncode(header) + "." + Base64UrlEncode(payload),
  privateKey
)
```

### **특징**

- 서버가 보유한 secret 또는 private key로 서명 생성
    
- 서명 검증 실패 시 토큰 전체를 거부함
    
- kid 필드와 연계하여 서명 키 교체 및 로테이션 가능
    
- Signature는 서버 측 무결성 검증 전용 영역이며, 클라이언트는 직접 해석 불가
    

---

## **전체 정보 구조 요약**

|**정보 항목**|**포함 영역**|**필드명 또는 예시**|**설명**|
|---|---|---|---|
|서명 알고리즘|Header|“alg”|서명 방식 지정 (예: HS256)|
|토큰 타입|Header|“typ”|일반적으로 “JWT”|
|키 식별자|Header|“kid”|서명 키 관리 및 교체에 사용|
|사용자 ID|Payload|“sub”|인증 주체 식별자|
|발급 시각|Payload|“iat”|토큰 생성 시간|
|만료 시각|Payload|“exp”|토큰 유효 기간|
|발급자|Payload|“iss”|발급 시스템 정보|
|권한/역할|Payload|“role”, “scope”|접근 권한 제어용|
|도메인 전용 정보|Payload|커스텀 클레임|조직 ID, 닉네임 등|
|서명 데이터|Signature|header.payload 기반|위변조 방지용 서명 값|
|서명 키|Signature|secret 또는 privateKey|서버 내부 보관 및 검증용|

---

## **마무리**

  

JWT는 구조가 단순하지만, 각 영역의 역할과 포함되는 정보의 정확한 이해가 필요함.

Header는 토큰의 형식과 서명 방식 정의, Payload는 사용자 인증 정보, Signature는 위조 방지를 위한 보안 장치로 기능함.

  

토큰 발급 시 고려할 주요 사항은 다음과 같음.

1. 민감 정보는 Payload에 포함하지 않을 것
    
2. exp와 같은 만료 클레임을 반드시 포함할 것
    
3. 서명 알고리즘 및 키 관리를 명확히 설정할 것
    

  

이 원칙을 기반으로 설계된 JWT는 인증 처리의 효율성과 보안성을 동시에 확보할 수 있음.

서비스 구조에 따라 Access/Refresh Token 분리, 토큰 블랙리스트 관리, 서명 키 교체 전략 등도 함께 설계하는 것이 권장됨.