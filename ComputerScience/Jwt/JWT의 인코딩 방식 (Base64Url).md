
##  JWT의 인코딩 방식: Base64Url Encoding

---

###  Base64와 Base64Url의 차이

|**구분**|**Base64**|**Base64Url**|
|---|---|---|
|목적|바이너리 데이터를 텍스트로 변환|URL/HTTP-safe 인코딩|
|특성|+, /, = 문자 포함|-, _로 대체 + 패딩(=) 제거|
|예|abc+123/==|abc-123_|
🔐 **Base64는 일반적으로 URL이나 HTTP Header에서 문제가 생길 수 있는 문자를 포함**하기 때문에,
JWT에서는 **보다 안전한 Base64Url 인코딩**을 사용합니다.

---
### **JWT에서 인코딩(Base64Url Encoding)을 하는 이유**

#### 텍스트 형태로 안전하게 전송하기 위해


HTTP 통신에서 데이터는 문자열로 주고받음

그런데 JWT는 내부적으로 JSON 형식이기 때문에, 이걸 그대로 사용하면 문제가 생길 수 있습니다
- {, }, :, " 등의 특수문자는 HTTP Header나 URL에 직접 넣기엔 부적절함
- 이진 데이터(바이너리 서명값)는 아예 텍스트로 넣을 수 없음
    

  
그래서 → **모든 데이터를 텍스트화**하고,
**HTTP Header (Authorization) 또는 URL 쿼리 파라미터**로 안전하게 전달할 수 있도록
→ **Base64Url 인코딩**

#### JWT를 세 부분으로 나누어 쉽게 처리할 수 있도록

```
<Header>.<Payload>.<Signature>
```

이 때 각각을 JSON으로 유지하면 parsing, 전달, 검증이 어렵고 길이도 불안정합니다.
  

Base64Url 인코딩을 사용하면:

- 길이가 예측 가능하고
- .으로 쉽게 구분 가능하며
- 디코딩만으로 바로 JSON으로 복원 가능

→ **토큰 파싱, 검증, 전달을 모두 간결하게 처리**

---

### JWT 각 파트에 적용되는 인코딩


JWT는 3개의 JSON 객체를 다음과 같이 처리합니다:

|**파트**|**JSON → 문자열 → 인코딩**|
|---|---|
|**Header**|{ "alg": "HS256", "typ": "JWT" } → 문자열 → **Base64Url 인코딩**|
|**Payload**|{ "sub": "123", "name": "Alice" } → 문자열 → **Base64Url 인코딩**|
|**Signature**|서명 결과 (바이너리) → **Base64Url 인코딩**|

→ 최종적으로 Header.Payload.Signature 형태로 이어 붙입니다.

---

### 보안 관련 주의점

- **Base64Url 인코딩 ≠ 암호화**
    
    누구나 인코딩 문자열을 디코딩하여 내용을 확인할 수 있음
    
    → 따라서 **민감한 정보(user password, 주민번호 등)는 포함시키면 안 됨**
    
- 보안은 **Signature로 위·변조를 방지**할 뿐
    
    → **내용 자체를 숨기려면 암호화(JWE: JSON Web Encryption)**를 따로 적용해야 함
    

---

## 요약 정리

|**항목**|**설명**|
|---|---|
|인코딩 방식|Base64Url (URL-safe, 패딩 제거)|
|적용 대상|Header, Payload, Signature|
|목적|JSON → 문자열로 안전하게 HTTP 전송 가능하게|
|보안 측면|인코딩일 뿐, 정보 보호(암호화)는 아님|
