
## **✅ JWT 구조와 각 구성요소 설명**

  

JWT(JSON Web Token)는 다음과 같은 **3가지 파트로 구성**된 문자열입니다:

```
<Header>.<Payload>.<Signature>
```

각 파트는 **Base64Url로 인코딩**되어 있으며, .(dot)으로 구분됩니다.

---

### **1. 🔹 Header (헤더)**

  

#### **✅ 역할**

- 토큰의 **타입**과 **서명 알고리즘** 정보를 담고 있습니다.
    

  

#### **✅ 예시**

```
{
  "alg": "HS256",
  "typ": "JWT"
}
```

|**필드**|**설명**|
|---|---|
|alg|서명에 사용할 알고리즘 (예: HS256, RS256)|
|typ|토큰의 타입 (일반적으로 “JWT”)|

→ 위 JSON은 Base64Url 인코딩되어 JWT의 첫 번째 부분이 됩니다.

---

### **2. 🔹 Payload (페이로드)**

  

#### **✅ 역할**

- 토큰에 담을 **실제 사용자 정보(클레임)**가 포함됩니다.
    

  

#### **✅ 예시**

```
{
  "sub": "1234567890",
  "name": "John Doe",
  "iat": 1516239022,
  "role": "admin"
}
```

#### **✅ 클레임(Claims)의 종류**

1. **등록된 클레임 (Registered Claims)**
    
    → JWT 표준에서 예약된 키
    

|**필드**|**설명**|
|---|---|
|iss|발급자(issuer)|
|sub|사용자 식별자(subject)|
|aud|대상자(audience)|
|exp|만료 시간(expiration time, UNIX timestamp)|
|iat|발급 시간(issued at)|

    
2. **비공식 클레임 (Public Claims)**
    
    - 사용자 정의 이름이지만 공개적으로 사용할 수 있는 값들
        
    
3. **사용자 정의 클레임 (Private Claims)**
    
    - 서비스 내부에서 사용하는 사용자 정보 (예: userId, role)

실무에서는 이렇게 생각하면 쉬움(사용자 입장에서 고려)

- 이 클레임을 **내 서비스만 해석할 거야**
    → 그냥 userId, role, teamCode 써도 OK
    → 사용자 입장에서 등록된 클레임이 아니므로 함부로 사용 불가
    → 사용자 정의 클레임
- 이 토큰이 **외부 서비스나 다른 팀도 해석해야 해**
    → https://example.com/claims/role 같이 **공개적이고 충돌 방지된 이름**을 써야 함
    → 공개된 사용자 정의 이름으로 확인되어 사용 X
- JWT 라이브러리에서 자동으로 처리하길 원해
    → exp, iss 같은 **등록된 클레임**을 써야 함
    → 등록된 클레임이므로 사용가능

### **3. 🔹 Signature (서명)**

  

#### **✅ 역할**

- 헤더와 페이로드의 위·변조를 방지합니다.
    
- 서버가 **비밀 키** 또는 **공개 키**로 서명하여 생성
    

  

#### **✅ 서명 생성 방식**

```
HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  secret
)
```

- HMAC 방식일 경우: 서버만 알고 있는 secret key를 사용
- RSA 방식일 경우: 공개키/개인키 기반으로 서명 및 검증

  

#### **✅ 예시**

```
SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

### **📌 정리**

|**구성요소**|**역할**|**보안**|
|---|---|---|
|Header|알고리즘/타입 정보|-|
|Payload|사용자 정보|✔️ Base64Url 인코딩(≠ 암호화 → 노출 가능 주의)|
|Signature|데이터 위·변조 방지|✔️ 서명 검증 가능|

> 🛡️ **중요**: Payload는 **암호화되어 있지 않기 때문에** 누구나 디코딩할 수 있습니다. **민감한 정보는 절대 포함하지 않아야 합니다.**